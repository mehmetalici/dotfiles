- defaults:
    link:
      relink: true
    brew:
      stdout: false
      stderr: true

- clean: ['~']


- create:
  - ~/downloads
  - ~/.vim/undo-history


- shell:
  - ./include/install-vscode
  - command: NONINTERACTIVE=1 /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
    stdin: true
  - command: |
      sudo add-apt-repository -y ppa:aacebedo/fasd &&
      sudo apt update &&
      sudo apt install -y fasd
    stdin: true  
  - git submodule update --init --recursive
  - bash -c "$(curl -fsSL https://raw.githubusercontent.com/ohmybash/oh-my-bash/master/tools/install.sh)" --unattended
  - command: |
      wget https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh -O ~/downloads/miniconda.sh &&
      bash ~/downloads/miniconda.sh -b -p $HOME/miniconda3


- link:
    ~/.vimrc: dotfiles/vimrc
    ~/.aliases: dotfiles/aliases
    ~/.bashrc: 
      path: dotfiles/bashrc
      force: true
    ~/.gitconfig: dotfiles/gitconfig


# TODO: Remove brew dependencies since we have already apt.
- brew:
  - tldr
  - gh
  - fd
  - pipx


- pipx:
    file: requirements-pipx.txt
    stdout: false
    stderr: true
